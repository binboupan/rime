<script>
    // http://localhost:8090/website/status?id=1
    let element_{{service}} = document.getElementById("website_{{service}}");
    async function pingService_{{service}}(){
        console.log("Pinging")
        try {
            const req = await fetch("/qbittorrent/status?id={{service}}&category={{category}}")
            
            if(req.status === 200){
                const data_{{service}} = await req.json()
                /*
                console.log(data_{{service}})

                let allowed_count = (`${data_{{service}}.num_dns_queries}` - `${data_{{service}}.num_blocked_filtering}`)
                let allowed_percentage = (allowed_count / `${data_{{service}}.num_dns_queries}` * 100).toFixed(1)


                let blocked_count = `${data_{{service}}.num_blocked_filtering}`
                let blocked_percentage = (`${data_{{service}}.num_blocked_filtering}` / `${data_{{service}}.num_dns_queries}` * 100).toFixed(1)
                */
                document.getElementById("qbittorrent-downloading").innerHTML = '<span class="mdi mdi-download">&nbsp;' + `${data_{{service}}.downloading}`;
                document.getElementById("qbittorrent-uploading").innerHTML = '<span class="mdi mdi-upload">&nbsp;' + `${data_{{service}}.seeding}`;
                document.getElementById("qbittorrent-dlspeed").innerHTML = '<span class="mdi mdi-arrow-down">&nbsp;' + `${data_{{service}}.dl_speed}` + "MB/s";
                document.getElementById("qbittorrent-ulspeed").innerHTML = '<span class="mdi mdi-arrow-up">&nbsp;' + `${data_{{service}}.ul_speed}` + " MB/s";
                
                
                    // + "<p>" + blocked_count + " (" + blocked_percentage +  `%)</p>` ;
                
                element_{{service}}.classList.remove("website-red");    
                element_{{service}}.classList.add("website-green");     
                
            } else{
                element_{{service}}.classList.remove("website-green");    
                element_{{service}}.classList.add("website-red");

            }
            console.log(req)
        } catch (error) {
            console.log(error)
            element_{{service}}.classList.add("website-red");
        }
    }

    console.log(element_{{service}})
    pingService_{{service}}()
    setInterval(pingService_{{service}}, {{config[category][service]['interval']*1000}})
    
</script>